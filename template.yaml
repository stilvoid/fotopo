AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Resources:
  Function:
    Type: AWS::Serverless::Function
    Properties:
      Handler: lambda.handler
      Runtime: python3.6
      CodeUri: ./lambda.py
      Events:
        Api:
          Type: Api
          Properties:
            Path: /
            Method: any
  UserPool:
    Type: AWS::Cognito::UserPool
    Properties:
      UserPoolName: fotopo
  Authorizer:
    Type: AWS::ApiGateway::Authorizer
    Properties:
      IdentitySource: method.request.header.Authorization
      Name: fotopo
      ProviderARNs:
      - !GetAtt UserPool.Arn
      RestApiId: !Ref ServerlessRestApi  # This is the default name generated by SAM
      Type: COGNITO_USER_POOLS
